"use strict";function updateSize(){var a=document.querySelector("webview");a.style.height=document.documentElement.clientHeight+"px",a.style.width=document.documentElement.clientWidth+"px"}onload=updateSize,window.onresize=updateSize;var manifest=chrome.runtime.getManifest();document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("view");console.log(manifest),a.request.onBeforeSendHeaders.addListener(function(a){for(var b={},c=a.requestHeaders,d=0,e=c.length;e>d;++d)if("User-Agent"===c[d].name){c[d].value="Personlig Sentralbord v0.1";break}return c.push({name:"ps",value:"1"}),b.requestHeaders=c,b},{urls:manifest.externally_connectable.matches},["blocking","requestHeaders"]),a.addEventListener("permissionrequest",function(a){a.request.allow()}),a.addEventListener("contentload",function(){try{a.contentWindow.postMessage({type:"APPID",id:chrome.runtime.id,version:manifest.version},"*"),setTimeout(function(){console.log("Sending appid "+chrome.runtime.id+" and version"+manifest.version),a.contentWindow.postMessage({type:"APPID",id:chrome.runtime.id,version:manifest.version},"*")},5e3),console.log("Sending appid "+chrome.runtime.id+" and version"+manifest.version)}catch(b){console.log("postMessage error: "+b)}})},!1);